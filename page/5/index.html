<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-新版本的loading模块" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/09/新版本的loading模块/" class="article-date">
  <time datetime="2017-02-09T07:48:38.000Z" itemprop="datePublished">2017-02-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cocos2d-js/">cocos2d-js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/09/新版本的loading模块/">cocos2d-js新版本的loading模块</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面是cocos2d-js的加载模块<br>js代码:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> createStyle = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">".Loading&#123;position:absolute;margin:-30px -60px;padding:0;top:50%;left:50%&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading ul&#123;margin:0;padding:0;&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading span&#123;color:#FFF;text-align:center;display:block;&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading li&#123;list-style:none;float:left;border-radius:15px;width:15px;height:15px;background:#FFF;margin:5px 0 0 10px&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading li .ball,.Loading li .unball&#123;background-color:#2187e7;background-image:-moz-linear-gradient(90deg,#2187e7 25%,#a0eaff);background-image:-webkit-linear-gradient(90deg,#2187e7 25%,#a0eaff);width:15px;height:15px;border-radius:50px&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading li .ball&#123;transform:scale(0);-moz-transform:scale(0);-webkit-transform:scale(0);animation:showDot 1s linear forwards;-moz-animation:showDot 1s linear forwards;-webkit-animation:showDot 1s linear forwards&#125;"</span> </span><br><span class="line">        + <span class="string">".Loading li .unball&#123;transform:scale(1);-moz-transform:scale(1);-webkit-transform:scale(1);animation:hideDot 1s linear forwards;-moz-animation:hideDot 1s linear forwards;-webkit-animation:hideDot 1s linear forwards&#125;"</span> </span><br><span class="line">        + <span class="string">"@keyframes showDot&#123;0%&#123;transform:scale(0,0)&#125;100%&#123;transform:scale(1,1)&#125;&#125;"</span> </span><br><span class="line">        + <span class="string">"@-moz-keyframes showDot&#123;0%&#123;-moz-transform:scale(0,0)&#125;100%&#123;-moz-transform:scale(1,1)&#125;&#125;"</span> </span><br><span class="line">        + <span class="string">"@-webkit-keyframes showDot&#123;0%&#123;-webkit-transform:scale(0,0)&#125;100%&#123;-webkit-transform:scale(1,1)&#125;&#125;"</span> </span><br><span class="line">        + <span class="string">"@keyframes hideDot&#123;0%&#123;transform:scale(1,1)&#125;100%&#123;transform:scale(0,0)&#125;&#125;"</span> </span><br><span class="line">        + <span class="string">"@-moz-keyframes hideDot&#123;0%&#123;-moz-transform:scale(1,1)&#125;100%&#123;-moz-transform:scale(0,0)&#125;&#125;"</span> </span><br><span class="line">        + <span class="string">"@-webkit-keyframes hideDot&#123;0%&#123;-webkit-transform:scale(1,1)&#125;100%&#123;-webkit-transform:scale(0,0)&#125;&#125;"</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> createDom = <span class="function"><span class="keyword">function</span>(<span class="params">id, num</span>) </span>&#123;</span><br><span class="line">        id = id || <span class="string">"Loading"</span>;</span><br><span class="line">        num = num || <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">var</span> i, item;</span><br><span class="line">        <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">        div.className = <span class="string">"Loading"</span>;</span><br><span class="line">        div.id = id;</span><br><span class="line">        <span class="keyword">var</span> bar = <span class="built_in">document</span>.createElement(<span class="string">"ul"</span>);</span><br><span class="line">        <span class="keyword">var</span> list = [];</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">            item = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">            list.push(&#123;<span class="attr">ball</span>: <span class="built_in">document</span>.createElement(<span class="string">"div"</span>),<span class="attr">halo</span>: <span class="literal">null</span>&#125;);</span><br><span class="line">            item.appendChild(list[list.length - <span class="number">1</span>].ball);</span><br><span class="line">            bar.appendChild(item)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</span><br><span class="line">        span.innerHTML = <span class="string">"Loading"</span>;</span><br><span class="line">        div.appendChild(bar);</span><br><span class="line">        div.appendChild(span);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">        <span class="keyword">return</span> list</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> startAnimation = <span class="function"><span class="keyword">function</span>(<span class="params">list, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> direction = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">var</span> time = <span class="number">300</span>;</span><br><span class="line">        <span class="keyword">var</span> animation = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (callback &amp;&amp; !callback()) &#123;</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> item = list[index];</span><br><span class="line">                <span class="keyword">if</span> (direction) &#123;</span><br><span class="line">                    item.ball.className = <span class="string">"ball"</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    item.ball.className = <span class="string">"unball"</span></span><br><span class="line">                &#125;</span><br><span class="line">                index++;</span><br><span class="line">                <span class="keyword">if</span> (index &gt;= list.length) &#123;</span><br><span class="line">                    direction = !direction;</span><br><span class="line">                    index = <span class="number">0</span>;</span><br><span class="line">                    time = <span class="number">1000</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    time = <span class="number">300</span></span><br><span class="line">                &#125;</span><br><span class="line">                animation()</span><br><span class="line">            &#125;, time)</span><br><span class="line">        &#125;;</span><br><span class="line">        animation()</span><br><span class="line">    &#125;;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bgColor = <span class="built_in">document</span>.body.style.background;</span><br><span class="line">        <span class="built_in">document</span>.body.style.background = <span class="string">"#000"</span>;</span><br><span class="line">        <span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">"style"</span>);</span><br><span class="line">        style.type = <span class="string">"text/css"</span>;</span><br><span class="line">        style.innerHTML = createStyle();</span><br><span class="line">        <span class="built_in">document</span>.head.appendChild(style);</span><br><span class="line">        <span class="keyword">var</span> list = createDom();</span><br><span class="line">        startAnimation(list, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"Loading"</span>);</span><br><span class="line">            <span class="keyword">if</span> (!div) &#123;</span><br><span class="line">                <span class="built_in">document</span>.body.style.background = bgColor</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> !!div</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)()</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/09/新版本的loading模块/" data-id="cjozunvxu0057osangjyb8n0p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-表单文本框提示" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/09/表单文本框提示/" class="article-date">
  <time datetime="2017-02-09T07:48:02.000Z" itemprop="datePublished">2017-02-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/代码片段/">代码片段</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/09/表单文本框提示/">表单文本框提示</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">pattern</span>=<span class="string">"^\d&#123;11&#125;$"</span> <span class="attr">oninput</span>=<span class="string">"out(this)"</span> <span class="attr">placeholder</span>=<span class="string">"请输入11位数字"</span> <span class="attr">maxlength</span>=<span class="string">"11"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Check<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>JavaScript代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">out</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> v = i.validity;</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span> === v.valueMessing)&#123;</span><br><span class="line">        i.setCustomValidity(<span class="string">"请填写些字段"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span> === v.patternMismatch)&#123;</span><br><span class="line">            i.setCustomValidity(<span class="string">"请输入11位数字的代码"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            i.setCustomValidity(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>验证通过与否除了跟<strong>validity</strong>接口下的属性相关外，还跟<strong>validationMessage</strong>是否有值有关系。只有当validity接口下的属性（customError除外）都为false并且validationMessage为空时才算验证通过。<br>具体可参考 <a href="http://www.w3.org/TR/2011/WD-html5-author-20110705/association-of-controls-and-forms.html#dom-cva-setcustomvalidity" target="_blank" rel="noopener">http://www.w3.org/TR/2011/WD-html5-author-20110705/association-of-controls-and-forms.html#dom-cva-setcustomvalidity</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/09/表单文本框提示/" data-id="cjozunvy7005rosantzydsquw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码片段/">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-日期格式模板输出" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/09/日期格式模板输出/" class="article-date">
  <time datetime="2017-02-09T07:47:37.000Z" itemprop="datePublished">2017-02-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/代码片段/">代码片段</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/09/日期格式模板输出/">日期格式模板输出</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">template</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fullYear = <span class="keyword">this</span>.getFullYear();</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">"M+"</span> : <span class="keyword">this</span>.getMonth() + <span class="number">1</span>,</span><br><span class="line">        <span class="string">"d+"</span> : <span class="keyword">this</span>.getDate(),</span><br><span class="line">        <span class="string">"h+"</span> : <span class="keyword">this</span>.getHours(),</span><br><span class="line">        <span class="string">"m+"</span> : <span class="keyword">this</span>.getMinutes(),</span><br><span class="line">        <span class="string">"s+"</span> : <span class="keyword">this</span>.getSeconds(),</span><br><span class="line">        <span class="string">"q+"</span> : <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>),</span><br><span class="line">        <span class="string">"S"</span>  : <span class="keyword">this</span>.getMilliseconds(),</span><br><span class="line">        <span class="string">"w"</span>  : <span class="string">"日一二三四五六"</span>.charAt(<span class="keyword">this</span>.getDay())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template = template.replace(<span class="regexp">/y&#123;4&#125;/</span>, fullYear).replace(<span class="regexp">/y&#123;2&#125;/</span>,fullYear.toString().substring(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> o)&#123;</span><br><span class="line">        <span class="keyword">if</span>(o.hasOwnProperty(k))&#123;</span><br><span class="line">            <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(k);</span><br><span class="line">            template = template.replace(reg, match);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">match</span>(<span class="params">m</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(m)</span><br><span class="line">        <span class="keyword">return</span> m.length == <span class="number">1</span> ? o[k] : (<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> template;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//日期格式</span></span><br><span class="line"><span class="keyword">var</span> dataTemplateArr = [</span><br><span class="line">    <span class="string">'yy年M月dd日  hh时mm分ss秒'</span>,</span><br><span class="line">    <span class="string">'yyyy/MM/dd'</span>,</span><br><span class="line">    <span class="string">'yyyy-MM-dd'</span>,</span><br><span class="line">    <span class="string">'yy/MM/dd'</span>,</span><br><span class="line">    <span class="string">'yy-MM-dd'</span>,</span><br><span class="line">    <span class="string">'yyyy/MM/dd hh:mm:ss'</span>,</span><br><span class="line">    <span class="string">'yyyy-MM-dd hh:mm:ss'</span>,</span><br><span class="line">    <span class="string">'yy/MM/dd hh:mm:ss'</span>,</span><br><span class="line">    <span class="string">'yy-MM-dd hh:mm:ss'</span>,</span><br><span class="line">    <span class="string">'hh:mm:ss'</span>,</span><br><span class="line">    <span class="string">'hh:mm'</span></span><br><span class="line">];</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="built_in">document</span>.write(<span class="keyword">new</span> <span class="built_in">Date</span>().format(dataTemplateArr[<span class="number">0</span>]));</span><br><span class="line"><span class="comment">//console.log()--&gt;17年2月09日  15时08分06秒</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/09/日期格式模板输出/" data-id="cjozunvxz005bosan6dqp9amp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码片段/">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-通过transform实现弹窗的缩放以至于适配手机端" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/07/通过transform实现弹窗的缩放以至于适配手机端/" class="article-date">
  <time datetime="2017-02-07T07:47:02.000Z" itemprop="datePublished">2017-02-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/代码片段/">代码片段</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/07/通过transform实现弹窗的缩放以至于适配手机端/">通过transform实现弹窗的缩放以至于适配手机端</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>直接上代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*@param design Number 设计尺寸 默认640</span></span><br><span class="line"><span class="comment">*@param selectors string dom节点</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">design, selectors</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> width = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.clientWidth, <span class="built_in">window</span>.innerWidth || <span class="number">0</span>);</span><br><span class="line"><span class="comment">//缩放比例</span></span><br><span class="line"><span class="keyword">var</span> scale = width / design;</span><br><span class="line"><span class="keyword">var</span> style = <span class="string">'&lt;style type="text/css"&gt;\n'</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; selectors.length; i++)&#123;</span><br><span class="line">    style += selectors[i].selector + <span class="string">'&#123;\n'</span></span><br><span class="line">          + <span class="string">'     -moz-transform-origin: '</span> + selectors[i].origin + <span class="string">';\n'</span></span><br><span class="line">          + <span class="string">'  -webkit-transform-origin: '</span> + selectors[i].origin + <span class="string">';\n'</span></span><br><span class="line">          + <span class="string">'          transform-origin: '</span> + selectors[i].origin + <span class="string">';\n'</span></span><br><span class="line">          + <span class="string">'     -moz-transform: scale('</span> + scale + <span class="string">');\n'</span></span><br><span class="line">          + <span class="string">'  -webkit-transform: scale('</span> + scale + <span class="string">');\n'</span></span><br><span class="line">          + <span class="string">'          transform: scale('</span> + scale + <span class="string">');\n'</span></span><br><span class="line">          + <span class="string">'&#125;\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">style += <span class="string">'&lt;/style&gt;\n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.open();</span><br><span class="line"><span class="built_in">document</span>.write(style);</span><br><span class="line"><span class="built_in">document</span>.close();</span><br><span class="line">&#125;)(<span class="number">640</span>, [&#123;<span class="string">"selector"</span>: <span class="string">".popup"</span>, <span class="string">"origin"</span>: <span class="string">"50% 50% 0"</span>&#125;]);</span><br></pre></td></tr></table></figure></p>
<p>将这一段代码放置在html头部head标签里面</p>
<p>example :<br>html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popup"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"contentParent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"closeBtn"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>css代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.f-popup</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/*background-color: rgba(0,0,0,.5);*/</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.f-popup-box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">overflow</span>:hidden;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">556px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">920px</span>;</span><br><span class="line">    <span class="attribute">margin</span>:-<span class="number">460px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">278px</span>;</span><br><span class="line">    <span class="comment">/*border:1px solid red;*/</span></span><br><span class="line">    <span class="attribute">background</span>:<span class="built_in">url</span>(./contentBg1.png) no-repeat;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>一般的做法是 将所需要展示的内容装载在contentParent标签里面，然后里面的内容按照正常的排版即可达到大部分适配</p>
<hr>
<p>下面在列出个别屏幕通过media screen适配的css代码<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** ipad / ipad mini **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">1024px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.98) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.98) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** nexus 6 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">960px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.92) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.92) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** iphone 6s **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">736px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.698) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.698) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** nexus 6 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">659px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.622) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.622) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** iphone 6 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">627px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.59) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.59) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** iphone 5 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">568px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.50) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.50) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** nexus 4 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">567px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.53) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.53) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">533px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.49) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.49) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** iphone 4 **/</span></span><br><span class="line">  @<span class="keyword">media</span> screen and (max-height: <span class="number">480px</span>) &#123;</span><br><span class="line">      <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.44) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">                  <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.44) <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/07/通过transform实现弹窗的缩放以至于适配手机端/" data-id="cjozunvy9005uosandycdqga4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码片段/">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cocos2d-js-2048游戏开发教程二" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/06/cocos2d-js-2048游戏开发教程二/" class="article-date">
  <time datetime="2017-02-06T07:55:17.000Z" itemprop="datePublished">2017-02-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cocos2d-js/">cocos2d-js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/06/cocos2d-js-2048游戏开发教程二/">cocos2d-js 2048游戏开发教程二</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="接上一个教程继续…"><a href="#接上一个教程继续…" class="headerlink" title="接上一个教程继续…"></a>接上一个教程继续…</h2><h4 id="6-定义手势动作"><a href="#6-定义手势动作" class="headerlink" title="6. 定义手势动作"></a>6. 定义手势动作</h4><p>我们需要通过触摸滑动来操作游戏，所以就需要定义上下左右的手势动作。这就要用到引擎的触摸响应机制，Cocos2d-html5与Cocos2d-x一样，有多点触控 和单点触控。默认情况下是多点触控，要使用单点触控，我们要使用addTargetedDelegate()方法设置代理。<br>那么如何判断上下左右呢？当然是根据起始触摸点和结束触摸点的坐标变化：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">loadListener : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> listener = cc.EventListener.create(&#123;</span><br><span class="line">        event           : cc.EventListener.TOUCH_ONE_BY_ONE,</span><br><span class="line">        target          : <span class="keyword">this</span>,</span><br><span class="line">        swallowTouches  : <span class="literal">true</span>,</span><br><span class="line">        onTouchBegan    : <span class="keyword">this</span>.onTouchBegan,</span><br><span class="line">        onTouchMoved    : <span class="keyword">this</span>.onTouchMoved,</span><br><span class="line">        onTouchEnded    : <span class="keyword">this</span>.onTouchEnded</span><br><span class="line">    &#125;);</span><br><span class="line">    cc.eventManager.addListener(listener, <span class="keyword">this</span>);</span><br><span class="line">&#125;,</span><br><span class="line">onTouchBegan: <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line">    <span class="keyword">var</span> touchPoint = touch.getLocation();</span><br><span class="line">    self.firstX = touchPoint.x;</span><br><span class="line">    self.firstY = touchPoint.y;</span><br><span class="line">    <span class="keyword">var</span> locationInNode = self.convertToNodeSpace(touchPoint);</span><br><span class="line">    <span class="keyword">var</span> size = self.getContentSize();</span><br><span class="line">    <span class="keyword">var</span> rect = cc.rect(<span class="number">0</span>, <span class="number">0</span>, size.width, size.height);</span><br><span class="line">    <span class="keyword">if</span> (!cc.rectContainsPoint(rect, locationInNode)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 触摸处理</span></span><br><span class="line">    <span class="comment">// self.onTouchDispose();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">onTouchMoved : <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line">    <span class="keyword">var</span> pos = touch.getLocation();</span><br><span class="line">&#125;,</span><br><span class="line">onTouchEnded : <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line">    <span class="keyword">var</span> touchPoint = touch.getLocation();</span><br><span class="line">    <span class="keyword">var</span> offsetX = self.firstX - touchPoint.x;</span><br><span class="line">    <span class="keyword">var</span> offsetY = self.firstY - touchPoint.y;</span><br><span class="line">    self.onTouchDispose(offsetX, offsetY);</span><br><span class="line">    <span class="comment">// console.log(Math.ceil(self.x), Math.ceil(self.y));</span></span><br><span class="line">&#125;,</span><br><span class="line">onTouchDispose : <span class="function"><span class="keyword">function</span>(<span class="params">offsetX, offsetY</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Math</span>.abs(offsetX) &gt; <span class="built_in">Math</span>.abs(offsetY))&#123;</span><br><span class="line">        <span class="keyword">if</span>(offsetX &gt; <span class="number">5</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.doLeft();</span><br><span class="line">            <span class="keyword">this</span>.doCheckGameOver();</span><br><span class="line">            <span class="keyword">this</span>.setScore(<span class="keyword">this</span>.score);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(offsetX &lt; <span class="number">-5</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.doRight();</span><br><span class="line">            <span class="keyword">this</span>.doCheckGameOver();</span><br><span class="line">            <span class="keyword">this</span>.setScore(<span class="keyword">this</span>.score);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(offsetY &gt; <span class="number">5</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.doDown();</span><br><span class="line">            <span class="keyword">this</span>.doCheckGameOver();</span><br><span class="line">            <span class="keyword">this</span>.setScore(<span class="keyword">this</span>.score);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(offsetY &lt; <span class="number">-5</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.doUp();</span><br><span class="line">            <span class="keyword">this</span>.doCheckGameOver();</span><br><span class="line">            <span class="keyword">this</span>.setScore(<span class="keyword">this</span>.score);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="7-卡片合并"><a href="#7-卡片合并" class="headerlink" title="7. 卡片合并"></a>7. 卡片合并</h4><p>游戏2048主要玩法就是通过合并相同数字的卡片以达到2048。通过手势动作往一个方向进行合并。我们的思路就是根据手势方向，遍历每一行或每一列，将在这个方向上相邻（中间没有其他数字）且数字相同的卡片合并加倍。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向上</span></span><br><span class="line">doUp:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isdo = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;<span class="number">4</span>; ++x)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> y=<span class="number">3</span>; y&gt;=<span class="number">0</span>; --y)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> y1=y<span class="number">-1</span>; y1&gt;=<span class="number">0</span>; --y1)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x][y1].getNumber() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x][y].getNumber() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y1].getNumber());</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y1].setNumber(<span class="number">0</span>);</span><br><span class="line">                        ++y;</span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x][y1].getNumber())&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y].getNumber()*<span class="number">2</span>);</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y1].setNumber(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">this</span>.score += <span class="keyword">this</span>.cardArr[x][y].getNumber();  <span class="comment">//增加分数</span></span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isdo;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 向下</span></span><br><span class="line">doDown:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isdo = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;<span class="number">4</span>; ++x)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> y=<span class="number">0</span>; y&lt;<span class="number">4</span>; ++y)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> y1=y+<span class="number">1</span>; y1&lt;<span class="number">4</span>; ++y1)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x][y1].getNumber() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x][y].getNumber() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y1].getNumber());</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y1].setNumber(<span class="number">0</span>);</span><br><span class="line">                        --y;</span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x][y1].getNumber())&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y].getNumber()*<span class="number">2</span>);</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y1].setNumber(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">this</span>.score += <span class="keyword">this</span>.cardArr[x][y].getNumber();  <span class="comment">//增加分数</span></span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isdo;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 向左</span></span><br><span class="line">doLeft:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isdo = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> y=<span class="number">0</span>; y&lt;<span class="number">4</span>; ++y)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;<span class="number">4</span>; ++x)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> x1=x+<span class="number">1</span>; x1&lt;<span class="number">4</span>; ++x1)&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x1][y].getNumber() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x1][y].getNumber());</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x1][y].setNumber(<span class="number">0</span>);</span><br><span class="line">                        --x;</span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x1][y].getNumber())&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y].getNumber()*<span class="number">2</span>);</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x1][y].setNumber(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">this</span>.score += <span class="keyword">this</span>.cardArr[x][y].getNumber();  <span class="comment">//增加分数</span></span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isdo;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 向右</span></span><br><span class="line">doRight:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isdo = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> y = <span class="number">0</span>; y &lt; <span class="number">4</span>; ++y)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">3</span>; x &gt;= <span class="number">0</span>; --x)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> x1 = x - <span class="number">1</span>; x1 &gt;= <span class="number">0</span>; --x1)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x1][y].getNumber() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[x][y].getNumber() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x1][y].getNumber());</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x1][y].setNumber(<span class="number">0</span>);</span><br><span class="line">                        ++x;</span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x1][y].getNumber())&#123;</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x][y].setNumber(<span class="keyword">this</span>.cardArr[x][y].getNumber()*<span class="number">2</span>);</span><br><span class="line">                        <span class="keyword">this</span>.cardArr[x1][y].setNumber(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">this</span>.score += <span class="keyword">this</span>.cardArr[x][y].getNumber();  <span class="comment">//增加分数</span></span><br><span class="line">                        isdo = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isdo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="8-添加分数"><a href="#8-添加分数" class="headerlink" title="8. 添加分数"></a>8. 添加分数</h4><p>添加两个变量：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">score:<span class="number">0</span>,  <span class="comment">// 分数  </span></span><br><span class="line">scoreLabel:<span class="literal">null</span>,  <span class="comment">// 显示分数的控件</span></span><br></pre></td></tr></table></figure></p>
<p>然后初始化分数显示：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 显示分数</span></span><br><span class="line"><span class="keyword">var</span> label = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"Score : "</span>, <span class="string">"Arial"</span>, <span class="number">32</span>);</span><br><span class="line">label.fillStyle = cc.color.RED;</span><br><span class="line">label.setAnchorPoint(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">label.x = <span class="number">100</span>;</span><br><span class="line">label.y = size.height - <span class="number">100</span>;</span><br><span class="line"><span class="keyword">this</span>.addChild(label, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">this</span>.scoreLabel = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"0"</span>, <span class="string">"Arial"</span>, <span class="number">32</span>);</span><br><span class="line"><span class="keyword">this</span>.scoreLabel.setAnchorPoint(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">this</span>.scoreLabel.x = <span class="number">100</span> + <span class="number">120</span>;</span><br><span class="line"><span class="keyword">this</span>.scoreLabel.y = size.height - <span class="number">100</span>;</span><br><span class="line"><span class="keyword">this</span>.addChild(<span class="keyword">this</span>.scoreLabel, <span class="number">10</span>);</span><br></pre></td></tr></table></figure></p>
<p>卡片合并的时候要增加分数，然后更新分数显示：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新分数</span></span><br><span class="line">setScore:<span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.scoreLabel.setString(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="9-判断游戏结束和胜利"><a href="#9-判断游戏结束和胜利" class="headerlink" title="9. 判断游戏结束和胜利"></a>9. 判断游戏结束和胜利</h4><p>每一次卡片合并操作后，我们都需要判断游戏是否胜利或者结束。利用五个条件判断游戏是否还能够继续：（1）还有空卡片 （2）还可以向右滑 （3）还可以向左滑 （4）还可以向上滑 （5）还可以向下滑。只要以上条件满足一个，游戏就可以再继续。否则，游戏不能再继续了。判断胜利则是看卡片中有没有数字达到2048。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断游戏是否结束*******************************</span></span><br><span class="line">doCheckGameOver:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> size = cc.director.getWinSize();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> isGameOver = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> y=<span class="number">0</span>; y&lt;<span class="number">4</span>; ++y)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;<span class="number">4</span>; ++x)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="number">0</span> ||</span><br><span class="line">                (x&gt;<span class="number">0</span>&amp;&amp;(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x<span class="number">-1</span>][y].getNumber())) ||</span><br><span class="line">                (x&lt;<span class="number">3</span>&amp;&amp;(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x+<span class="number">1</span>][y].getNumber())) ||</span><br><span class="line">                (y&gt;<span class="number">0</span>&amp;&amp;(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x][y<span class="number">-1</span>].getNumber())) ||</span><br><span class="line">                (y&lt;<span class="number">3</span>&amp;&amp;(<span class="keyword">this</span>.cardArr[x][y].getNumber() == <span class="keyword">this</span>.cardArr[x][y+<span class="number">1</span>].getNumber())))</span><br><span class="line">            &#123;</span><br><span class="line">                isGameOver = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(isGameOver)&#123;<span class="comment">//游戏结束</span></span><br><span class="line">        <span class="keyword">this</span>.gameOverLayer = <span class="keyword">new</span> cc.LayerColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>), <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">var</span> labelGameOver = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"Game Over!!!"</span>, <span class="string">"Arial"</span>, <span class="number">60</span>);</span><br><span class="line">        labelGameOver.setPosition(size.width/<span class="number">2</span>, size.height/<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">this</span>.gameOverLayer.addChild(labelGameOver);</span><br><span class="line">        <span class="keyword">this</span>.getParent().addChild(<span class="keyword">this</span>.gameOverLayer, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.scheduleOnce(<span class="keyword">this</span>.removeGameOverLayer, <span class="number">2</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.shouldCreateCardNumber())&#123;</span><br><span class="line">            <span class="keyword">this</span>.autoCreateCardNumber();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.isWin())&#123;<span class="comment">// if win</span></span><br><span class="line">        <span class="keyword">this</span>.gameWinLayer = <span class="keyword">new</span> cc.LayerColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>), <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">var</span> labelGameWin = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"You Win!!!"</span>, <span class="string">"Arial"</span>, <span class="number">60</span>);</span><br><span class="line">        labelGameWin.setPosition(size.width/<span class="number">2</span>, size.height/<span class="number">2</span> + <span class="number">30</span>);</span><br><span class="line">        <span class="keyword">var</span> text = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"Your Score : "</span>, <span class="string">"Arial"</span>, <span class="number">30</span>);</span><br><span class="line">        text.setPosition(size.width/<span class="number">2</span> - <span class="number">50</span>, size.height/<span class="number">2</span> - <span class="number">30</span>);</span><br><span class="line">        <span class="keyword">var</span> labelScore = <span class="keyword">new</span> cc.LabelTTF(<span class="keyword">this</span>.score, <span class="string">"Arial"</span>, <span class="number">30</span>);</span><br><span class="line">        labelScore.setPosition(size.width/<span class="number">2</span> + <span class="number">75</span>, size.height/<span class="number">2</span> - <span class="number">30</span>);</span><br><span class="line">        <span class="keyword">this</span>.gameWinLayer.addChild(labelGameWin);</span><br><span class="line">        <span class="keyword">this</span>.gameWinLayer.addChild(text);</span><br><span class="line">        <span class="keyword">this</span>.gameWinLayer.addChild(labelScore);</span><br><span class="line">        <span class="keyword">this</span>.getParent().addChild(<span class="keyword">this</span>.gameWinLayer, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.scheduleOnce(<span class="keyword">this</span>.removeGameWinLayer, <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 判断是否胜利</span></span><br><span class="line">isWin:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> Win = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;<span class="number">4</span>; ++j)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[i][j].getNumber() == <span class="number">2048</span>)&#123;</span><br><span class="line">                Win = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Win;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="10-界面优化"><a href="#10-界面优化" class="headerlink" title="10. 界面优化"></a>10. 界面优化</h4><p>在一个卡片里面，当数字变成两位数、三位数的时候，就需要调整一下数字的大小，在CardSprite的setNumber方法中添加代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">setNumber:<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.number = num;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.number &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setString(<span class="keyword">this</span>.number);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setString(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置数字大小</span></span><br><span class="line">    <span class="keyword">if</span>(num &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">60</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(num &gt;= <span class="number">16</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">55</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(num &gt;= <span class="number">128</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">40</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(num &gt;= <span class="number">1024</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">30</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断数字的大小来调整颜色</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.number == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">200</span>,<span class="number">190</span>,<span class="number">180</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">230</span>,<span class="number">220</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">220</span>,<span class="number">200</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">180</span>,<span class="number">120</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">16</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">140</span>,<span class="number">90</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">32</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">120</span>,<span class="number">90</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">64</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">90</span>,<span class="number">60</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">128</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">90</span>,<span class="number">60</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">256</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">200</span>,<span class="number">70</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">512</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">200</span>,<span class="number">70</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">1024</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">130</span>,<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">2048</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">130</span>,<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="11-结束"><a href="#11-结束" class="headerlink" title="11. 结束"></a>11. 结束</h4><p>最后奉上 最终效果<br><img src="https://cloud.githubusercontent.com/assets/14084243/22675411/82e82038-ed20-11e6-8248-f266509114c8.png" alt="image"></p>
<p>在线浏览地址：<a href="https://zhongdz.github.io/openSource/game_2048/startup.html" target="_blank" rel="noopener">https://zhongdz.github.io/openSource/game_2048/startup.html</a><br>源码地址(欢迎star)：<a href="https://github.com/zhongDZ/openSource" target="_blank" rel="noopener">https://github.com/zhongDZ/openSource</a> </p>
<p>项目总结：<br>       在这个项目开发的过程中，不乏会遇到或这或那的小问题，但总不能让这些成为我们完成项目的理由。这个项目是用cocos2d-js 3.1开发的。<br><strong> 问题一：在CC.Layer 添加事件的时候，总会发现只有在屏幕的右上角1/4部分有事件触发到。<br>原因：调试了一会，发现是Layer的锚点所致。<br>解决方法：利用框架所提供的的这个方法this.ignoreAnchorPointForPosition(false);忽略锚点。</strong></p>
<p><strong>问题二：在初始化卡片的时候每个卡片上需显示数字 用到cc.LabelTTF生成文本精灵。当初始化为空的文本精灵的时候，可以成功创建，并且控制台不报错，但是当数字重新set的时候没有任何效果。<br>原因：框架内部容错处理导致。<br>解决方法：当cc.LabelTTF(‘’, ‘font-family’, font-size)第一个参数为空的时候应该” “（中间有空格）。</strong></p>
<p>结束语：2048这个项目暂时就到这里了.欢饮拍砖一起学习，源码稍后供上。<br>期待下一个教程~~~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/06/cocos2d-js-2048游戏开发教程二/" data-id="cjozunvyw006vosanmkjmblbx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cocos2d-js-2048游戏开发教程一" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/05/cocos2d-js-2048游戏开发教程一/" class="article-date">
  <time datetime="2017-02-05T07:55:17.000Z" itemprop="datePublished">2017-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cocos2d-js/">cocos2d-js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/05/cocos2d-js-2048游戏开发教程一/">cocos2d-js 2048游戏开发教程一</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="序"><a href="#序" class="headerlink" title="序"></a>序</h3><p>（这是本人第一次教程写作之旅，没有什么乱七八糟的套路，就是为了将自己的技术写出来，让大家一同来学习，得以提高自己的水平。由于水平有限，如在过程中发现错误的或者有更好的方法不吝贵读者的评论。2017 撸起袖子干！联系方式：qq: 785861210. ）</p>
<hr>
<h3 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a>一、介绍</h3><p> cocos2d-JS是cocos2d-x (官网 ：<a href="http://cocos2d-x.org/" target="_blank" rel="noopener">http://cocos2d-x.org/</a>) 的JavaScript版本，它的前身是cocos2d-html5。在3.0版本以前叫做cocos2d-html5，从3.0版本开始叫做cocos2d-JS。我们知道cocos2d-x支持使用C++、Lua、Javascript来进行程序开发，其所内置的是一个Javascript引擎，通过用C++解析Javascript去执行；而cocos2d-html5是使用Javascript进行开发，最终运行在浏览器里的。那么在v3.0的时候，cocos2d-html5和cocos2d-x JSBinding被合到了一起，称作cocos2d-JS。和cocos2d-html5不同的是，cocos2d-JS开发的程序不仅可以运行在浏览器里，还可以编译运行在Mac OSX, Windows, iOS, Android的原生平台上，真正做到“一次开发，全平台运行”。cocos2d-JS支持cocos2d-x的所有特性并提供更简单易用的Javascript风格API，它还自带了cocos Console，一个用于简化项目创建和不同目标平台编译发布流程的终端工具。</p>
<hr>
<h3 id="二、2048游戏开发"><a href="#二、2048游戏开发" class="headerlink" title="二、2048游戏开发"></a>二、2048游戏开发</h3><h4 id="1-创建项目-（默认读者已经搭建好一系列的开发环境）"><a href="#1-创建项目-（默认读者已经搭建好一系列的开发环境）" class="headerlink" title="1. 创建项目 （默认读者已经搭建好一系列的开发环境）"></a>1. 创建项目 （默认读者已经搭建好一系列的开发环境）</h4><p> 通过如下命令创建一个名为game2048的工程<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cocos <span class="keyword">new</span> game2048 -l js</span><br></pre></td></tr></table></figure></p>
<p>其中，-l表示采用的语言，可选值为cpp、lua以及js。运行命令之后，便可在所在目录看到game2048文件夹。<br>图1-1为game2048工程的创建过程</p>
<p><img src="https://cloud.githubusercontent.com/assets/14084243/22624766/97cec94a-ebc0-11e6-82e8-16b695121862.png" alt="image"></p>
<p> 除创建命令外，cocos console还为工程提供了运行、编译等命令，具体如下：<br>a. cocos run -p web|ios|android|mac|win32 //运行在指定平台<br> b. cocos compile -p web|ios|android|mac|win32 -m release//将项目工程打包到指定平台上</p>
<h4 id="2-项目game2048的目录结构"><a href="#2-项目game2048的目录结构" class="headerlink" title="2. 项目game2048的目录结构"></a>2. 项目game2048的目录结构</h4><p>打开刚刚创建好的game2048工程，可以看到其目录结构图如图1-2所示。</p>
<p><img src="https://cloud.githubusercontent.com/assets/14084243/22624964/ff7a2248-ebc4-11e6-9248-742d986e1ce0.png" alt="image"></p>
<h4 id="3-创建游戏场景"><a href="#3-创建游戏场景" class="headerlink" title="3. 创建游戏场景"></a>3. 创建游戏场景</h4><p> 由于2048游戏相对简单，它只需要一个场景，下面我们来创建一个场景：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//层</span></span><br><span class="line"><span class="keyword">var</span> gameLayer = cc.Layer.extend(&#123;</span><br><span class="line">    sprite:<span class="literal">null</span>,</span><br><span class="line">    ctor:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//场景</span></span><br><span class="line"><span class="keyword">var</span> gameScene = cc.Scene.extend(&#123;</span><br><span class="line">    onEnter:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line">        <span class="keyword">var</span> _gameLayer = <span class="keyword">new</span> gameLayer();</span><br><span class="line">        <span class="keyword">this</span>.addChild(layer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>很简单吧！我们只需要创建一个Layer类，然后将它的一个实例加入Scene中，程序运行时main.js会创建一个Scene的实例作为程序入口。</p>
<h4 id="4-创建卡牌类"><a href="#4-创建卡牌类" class="headerlink" title="4. 创建卡牌类"></a>4. 创建卡牌类</h4><p>我们把2048游戏中的每一个方格看作一个卡片，上面的数字是它的属性。也就是说我们需要4x4=16个卡片类的对象。新建一个CardSprite.js文件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CardSprite = cc.Layer.extend(&#123;</span><br><span class="line">    number:<span class="number">0</span>,</span><br><span class="line">    labelCardNumber:<span class="literal">null</span>,</span><br><span class="line">    cardColorBG:<span class="literal">null</span>,</span><br><span class="line">    ctor:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line">    &#125;,</span><br><span class="line">    initCard:<span class="function"><span class="keyword">function</span>(<span class="params">num, width, height, positionX, positionY</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = num;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.cardColorBG = <span class="keyword">new</span> cc.LayerColor(<span class="keyword">new</span> cc.color(<span class="number">200</span>, <span class="number">190</span>, <span class="number">180</span>, <span class="number">255</span>), width<span class="number">-15</span>, height<span class="number">-15</span>);</span><br><span class="line">        <span class="keyword">this</span>.cardColorBG.setPosition(positionX, positionY);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.number &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber = <span class="keyword">new</span> cc.LabelTTF(<span class="keyword">this</span>.number,<span class="string">"Arial"</span>, <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setPosition(<span class="keyword">this</span>.cardColorBG.getContentSize().width/<span class="number">2</span>, <span class="keyword">this</span>.cardColorBG.getContentSize().height/<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setTag(<span class="number">8</span>);</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.addChild(<span class="keyword">this</span>.labelCardNumber);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber = <span class="keyword">new</span> cc.LabelTTF(<span class="string">" "</span>,<span class="string">"Arial"</span>, <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setPosition(<span class="keyword">this</span>.cardColorBG.getContentSize().width/<span class="number">2</span>, <span class="keyword">this</span>.cardColorBG.getContentSize().height/<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setTag(<span class="number">8</span>);</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.addChild(<span class="keyword">this</span>.labelCardNumber);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.addChild(<span class="keyword">this</span>.cardColorBG);</span><br><span class="line">    &#125;,</span><br><span class="line">    getNumber:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.number;</span><br><span class="line">    &#125;,</span><br><span class="line">    setNumber:<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = num;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.number &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setString(<span class="keyword">this</span>.number);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setString(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置数字大小</span></span><br><span class="line">        <span class="keyword">if</span>(num &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">60</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num &gt;= <span class="number">16</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">55</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num &gt;= <span class="number">128</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">40</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num &gt;= <span class="number">1024</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.labelCardNumber.setFontSize(<span class="number">30</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断数字的大小来调整颜色</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.number == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">200</span>,<span class="number">190</span>,<span class="number">180</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">230</span>,<span class="number">220</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">220</span>,<span class="number">200</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">180</span>,<span class="number">120</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">16</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">140</span>,<span class="number">90</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">32</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">120</span>,<span class="number">90</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">64</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">90</span>,<span class="number">60</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">128</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">90</span>,<span class="number">60</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">256</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">200</span>,<span class="number">70</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">512</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">240</span>,<span class="number">200</span>,<span class="number">70</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">1024</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">130</span>,<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.number == <span class="number">2048</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardColorBG.setColor(<span class="keyword">new</span> cc.color(<span class="number">0</span>,<span class="number">130</span>,<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态函数</span></span><br><span class="line">CardSprite.createCardSprite = <span class="function"><span class="keyword">function</span>(<span class="params">num, width, height, positionX, positionY</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> card = <span class="keyword">new</span> CardSprite();</span><br><span class="line">    <span class="keyword">if</span>(card)&#123;</span><br><span class="line">        card.initCard(num, width, height, positionX, positionY);</span><br><span class="line">        <span class="keyword">return</span> card;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里将CardSprite类继承自Layer，然后初始化卡片背景和上面的数字，还定义了number的set/get方法。这里需要注意几点：<br>新建.js文件以后需要在project.json相关位置添加文件路径。<br>继承都需要有 this._super();，一般写在构造函数ctor:function()中。<br>注意静态函数的写法，类名.函数名 = function(){}。</p>
<h4 id="5-初始化游戏界面"><a href="#5-初始化游戏界面" class="headerlink" title="5. 初始化游戏界面"></a>5. 初始化游戏界面</h4><p>主要是在Layer的init()函数中初始化，我们使用一个4x4的二维组来放置在主界面创建16个卡片：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gameLayer = cc.Layer.extend(&#123;</span><br><span class="line">    name : <span class="string">'gameLayer'</span>,</span><br><span class="line">    firstX:<span class="literal">null</span>,</span><br><span class="line">    firstY:<span class="literal">null</span>,</span><br><span class="line">    cardArr:<span class="literal">null</span>,</span><br><span class="line">    score:<span class="number">0</span>,</span><br><span class="line">    scoreLabel:<span class="literal">null</span>,</span><br><span class="line">    gameOverLayer:<span class="literal">null</span>,</span><br><span class="line">    gameWinLayer:<span class="literal">null</span>,</span><br><span class="line">    ctor : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.init();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.ignoreAnchorPointForPosition(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.initContent();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.loadListener();</span><br><span class="line">    &#125;,</span><br><span class="line">    init : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> gameBg  = <span class="keyword">new</span> cc.Sprite(res.loadingpage);</span><br><span class="line">        gameBg.x = size.width/<span class="number">2</span>;</span><br><span class="line">        gameBg.y = size.height/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">this</span>.addChild(gameBg,<span class="number">0</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    initContent : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> lazyLayer = <span class="keyword">this</span>.lazyLayer = <span class="keyword">new</span> cc.LayerColor(cc.color(<span class="number">180</span>, <span class="number">170</span>, <span class="number">160</span>, <span class="number">255</span>), <span class="number">560</span>, <span class="number">560</span>);</span><br><span class="line">        lazyLayer.ignoreAnchorPointForPosition(<span class="literal">false</span>);</span><br><span class="line">        lazyLayer.x = size.width/<span class="number">2</span>;</span><br><span class="line">        lazyLayer.y = size.height/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">this</span>.addChild(lazyLayer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 显示分数</span></span><br><span class="line">        <span class="keyword">var</span> label = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"Score : "</span>, <span class="string">"Arial"</span>, <span class="number">32</span>);</span><br><span class="line">        label.fillStyle = cc.color.RED;</span><br><span class="line">        label.setAnchorPoint(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        label.x = <span class="number">100</span>;</span><br><span class="line">        label.y = size.height - <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">this</span>.addChild(label, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">this</span>.scoreLabel = <span class="keyword">new</span> cc.LabelTTF(<span class="string">"0"</span>, <span class="string">"Arial"</span>, <span class="number">32</span>);</span><br><span class="line">        <span class="keyword">this</span>.scoreLabel.setAnchorPoint(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">this</span>.scoreLabel.x = <span class="number">100</span> + <span class="number">120</span>;</span><br><span class="line">        <span class="keyword">this</span>.scoreLabel.y = size.height - <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">this</span>.addChild(<span class="keyword">this</span>.scoreLabel, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建卡片数组</span></span><br><span class="line">        <span class="keyword">this</span>.cardArr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.cardArr[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> _size = cc.director.getWinSize();</span><br><span class="line">        <span class="comment">// 初始化卡片数组</span></span><br><span class="line">        <span class="keyword">this</span>.createCards(_size);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 随机生成两个数字</span></span><br><span class="line">        <span class="keyword">this</span>.autoCreateCardNumber();</span><br><span class="line">        <span class="keyword">this</span>.autoCreateCardNumber();</span><br><span class="line">    &#125;,</span><br><span class="line">    createCards:<span class="function"><span class="keyword">function</span>(<span class="params">size</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> unitSize = (size.height/<span class="number">2</span> - <span class="number">80</span>)/<span class="number">4</span>;</span><br><span class="line">        <span class="keyword">var</span> unitSizeY = unitSize - <span class="number">30</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;<span class="number">4</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">var</span> card = CardSprite.createCardSprite(<span class="number">0</span>, unitSize, unitSize, unitSize*i + <span class="number">80</span>, unitSize*j + <span class="number">330</span>);</span><br><span class="line">                <span class="keyword">this</span>.cardArr[i][j] = card;</span><br><span class="line">                <span class="keyword">this</span>.addChild(card);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    autoCreateCardNumber:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//生成随机的卡片，数字2/4</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">4</span>);  <span class="comment">// generate a number between 0 and 3</span></span><br><span class="line">            <span class="keyword">var</span> j = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[i][j].getNumber() == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.cardArr[i][j].setNumber(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">10</span>) &lt; <span class="number">1</span> ? <span class="number">4</span> : <span class="number">2</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.shouldCreateCardNumber())&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    shouldCreateCardNumber:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">// 判断是否需要自动生成新的卡片</span></span><br><span class="line">        <span class="keyword">var</span> should = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;<span class="number">4</span>; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.cardArr[i][j].getNumber() == <span class="number">0</span>)&#123;</span><br><span class="line">                    should = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> should;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> gameScene = cc.Scene.extend(&#123;</span><br><span class="line">    ctor:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> layer = <span class="keyword">new</span> gameLayer();</span><br><span class="line">        <span class="keyword">this</span>.addChild(layer);</span><br><span class="line">        layer.x = size.width/<span class="number">2</span>;</span><br><span class="line">        layer.y = size.height/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>通过调用<br>this.createCards(size);<br>初始化所有16个卡片，由于0不显示，所以卡片上都没有数字。然后调用<br>this.autoCreateCardNumber();<br>在随机的两个卡片上生成数字，在随机生成的时候我们应该<br>先判断还有没有空位<br>，否则有可能会陷入死循环。</p>
<p>初始化的界面如下图：<br><img src="https://cloud.githubusercontent.com/assets/14084243/22675169/0cc6b33e-ed1f-11e6-9a7b-381e8ec1e20b.png" alt="image"></p>
<p>今天就先到这里啦~~~（下节内容定义手势动作，卡片合并，添加分数，判断游戏结束和顺利，界面优化）下节继续，下节再见！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/05/cocos2d-js-2048游戏开发教程一/" data-id="cjozunvyy006wosanxhgdij9z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-IOS与Android平台上问题列表" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/19/IOS与Android平台上问题列表/" class="article-date">
  <time datetime="2017-01-19T07:55:17.000Z" itemprop="datePublished">2017-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/遇到的问题及解决方案/">遇到的问题及解决方案</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/19/IOS与Android平台上问题列表/">IOS与Android平台上问题列表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>问题列表</p>
<h2 id="伪类-active-生效"><a href="#伪类-active-生效" class="headerlink" title="伪类 :active 生效"></a>伪类 :active 生效</h2><h3 id="要CSS伪类-active生效，只需要给document绑定touchstart或touchend事件"><a href="#要CSS伪类-active生效，只需要给document绑定touchstart或touchend事件" class="headerlink" title="要CSS伪类:active生效，只需要给document绑定touchstart或touchend事件"></a>要CSS伪类:active生效，只需要给document绑定touchstart或touchend事件</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;a herf=foo &gt;bar&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">  document.addEventListener('touchstart',function()&#123;&#125;,false);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="消除transition闪屏"><a href="#消除transition闪屏" class="headerlink" title="消除transition闪屏"></a>消除transition闪屏</h2><h3 id="两个方法"><a href="#两个方法" class="headerlink" title="两个方法"></a>两个方法</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-transform-style</span>: <span class="selector-tag">preserve-3d</span>;</span><br><span class="line"><span class="comment">/*设置内嵌的元素在 3D 空间如何呈现：保留 3D*/</span></span><br><span class="line"><span class="selector-tag">-webkit-backface-visibility</span>:?<span class="selector-tag">hidden</span>;</span><br><span class="line"><span class="comment">/*（设置进行转换的元素的背面在面对用户时是否可见：隐藏）*/</span></span><br></pre></td></tr></table></figure>
<h2 id="消除ie10里面的那个叉号"><a href="#消除ie10里面的那个叉号" class="headerlink" title="消除ie10里面的那个叉号"></a>消除ie10里面的那个叉号</h2><p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh767361.aspx" target="_blank" rel="noopener">http://msdn.microsoft.com/en-us/library/windows/apps/hh767361.aspx</a><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-ms-clear</span>&#123;<span class="attribute">display</span>:none;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="关于ios与os端字体的优化-横竖屏会出现字体加粗不一致等"><a href="#关于ios与os端字体的优化-横竖屏会出现字体加粗不一致等" class="headerlink" title="关于ios与os端字体的优化(横竖屏会出现字体加粗不一致等)"></a>关于ios与os端字体的优化(横竖屏会出现字体加粗不一致等)</h2><h3 id="ios浏览器横屏时会重置字体大小，设置-text-size-adjust-为-none-可以解决ios上的问题，但桌面版safari的字体缩放功能会失效，因此最佳方案是将-text-size-adjust-为-100-。"><a href="#ios浏览器横屏时会重置字体大小，设置-text-size-adjust-为-none-可以解决ios上的问题，但桌面版safari的字体缩放功能会失效，因此最佳方案是将-text-size-adjust-为-100-。" class="headerlink" title="ios浏览器横屏时会重置字体大小，设置 text-size-adjust 为 none 可以解决ios上的问题，但桌面版safari的字体缩放功能会失效，因此最佳方案是将 text-size-adjust 为 100% 。"></a>ios浏览器横屏时会重置字体大小，设置 text-size-adjust 为 none 可以解决ios上的问题，但桌面版safari的字体缩放功能会失效，因此最佳方案是将 text-size-adjust 为 100% 。</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-text-size-adjust</span>: 100%;</span><br><span class="line"><span class="selector-tag">-ms-text-size-adjust</span>: 100%;</span><br><span class="line"><span class="selector-tag">text-size-adjust</span>: 100%;</span><br></pre></td></tr></table></figure>
<h2 id="js事件"><a href="#js事件" class="headerlink" title="js事件"></a>js事件</h2><h3 id="click-事件普遍-300ms-的延迟-在手机上绑定click-事件，会使得操作有300ms-的延迟，体验并不是很好。-开发者大多数会使用封装的-tap-事件来代替click-事件，所谓的-tap-事件由-touchstart-事件-touchmove-判断-touchend-事件封装组成"><a href="#click-事件普遍-300ms-的延迟-在手机上绑定click-事件，会使得操作有300ms-的延迟，体验并不是很好。-开发者大多数会使用封装的-tap-事件来代替click-事件，所谓的-tap-事件由-touchstart-事件-touchmove-判断-touchend-事件封装组成" class="headerlink" title="click 事件普遍 300ms 的延迟 在手机上绑定click 事件，会使得操作有300ms 的延迟，体验并不是很好。 开发者大多数会使用封装的 tap 事件来代替click 事件，所谓的 tap 事件由 touchstart 事件 + touchmove 判断 + touchend 事件封装组成"></a>click 事件普遍 300ms 的延迟 在手机上绑定click 事件，会使得操作有300ms 的延迟，体验并不是很好。 开发者大多数会使用封装的 tap 事件来代替click 事件，所谓的 tap 事件由 touchstart 事件 + touchmove 判断 + touchend 事件封装组成</h3><h2 id="ios点击会慢300ms"><a href="#ios点击会慢300ms" class="headerlink" title="ios点击会慢300ms"></a>ios点击会慢300ms</h2><p><a href="https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE" target="_blank" rel="noopener">https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE</a> <a href="http://stackoverflow.com/questions/12238587/eliminate-300ms-delay-on-click-events-in-mobile-safari" target="_blank" rel="noopener">http://stackoverflow.com/questions/12238587/eliminate-300ms-delay-on-click-events-in-mobile-safari</a></p>
<h3 id="使用css3动画的时尽量利用3D加速，从而使得动画变得流畅。动画过程中的动画闪白可以通过backface-visibility-隐藏。"><a href="#使用css3动画的时尽量利用3D加速，从而使得动画变得流畅。动画过程中的动画闪白可以通过backface-visibility-隐藏。" class="headerlink" title="使用css3动画的时尽量利用3D加速，从而使得动画变得流畅。动画过程中的动画闪白可以通过backface-visibility 隐藏。"></a>使用css3动画的时尽量利用3D加速，从而使得动画变得流畅。动画过程中的动画闪白可以通过backface-visibility 隐藏。</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-transform-style</span>: <span class="selector-tag">preserve-3d</span>;</span><br><span class="line"><span class="selector-tag">-webkit-backface-visibility</span>: <span class="selector-tag">hidden</span>;</span><br></pre></td></tr></table></figure>
<h2 id="ie10的特殊鼠标事件"><a href="#ie10的特殊鼠标事件" class="headerlink" title="ie10的特殊鼠标事件"></a>ie10的特殊鼠标事件</h2><p><a href="http://www.mansonchor.com/blog/blog_detail_73.html" target="_blank" rel="noopener">http://www.mansonchor.com/blog/blog_detail_73.html</a></p>
<h2 id="不让android识别邮箱"><a href="#不让android识别邮箱" class="headerlink" title="不让android识别邮箱"></a>不让android识别邮箱</h2><p><meta content="email=no" name="format-detection"></p>
<h2 id="禁止ios弹出各种操作窗口"><a href="#禁止ios弹出各种操作窗口" class="headerlink" title="禁止ios弹出各种操作窗口"></a>禁止ios弹出各种操作窗口</h2><p>-webkit-touch-callout:none</p>
<h2 id="禁止用户选中文字"><a href="#禁止用户选中文字" class="headerlink" title="禁止用户选中文字"></a>禁止用户选中文字</h2><p>-webkit-user-select:none</p>
<h2 id="动画效果中，使用translate比使用定位性能高"><a href="#动画效果中，使用translate比使用定位性能高" class="headerlink" title="动画效果中，使用translate比使用定位性能高"></a>动画效果中，使用translate比使用定位性能高</h2><p><a href="http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/" target="_blank" rel="noopener">http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/</a></p>
<h2 id="拿到滚动条"><a href="#拿到滚动条" class="headerlink" title="拿到滚动条"></a>拿到滚动条</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.scrollY</span><br><span class="line"><span class="built_in">window</span>.scrollX</span><br></pre></td></tr></table></figure>
<h3 id="比如要绑定一个touchmove的事件，正常的情况下类似这样-来自呼吸二氧化碳"><a href="#比如要绑定一个touchmove的事件，正常的情况下类似这样-来自呼吸二氧化碳" class="headerlink" title="比如要绑定一个touchmove的事件，正常的情况下类似这样(来自呼吸二氧化碳)"></a>比如要绑定一个touchmove的事件，正常的情况下类似这样(来自呼吸二氧化碳)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).on(<span class="string">'touchmove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//.….code</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="而如果中间的code需要处理的东西多的话，fps就会下降影响程序顺滑度，而如果改成这样"><a href="#而如果中间的code需要处理的东西多的话，fps就会下降影响程序顺滑度，而如果改成这样" class="headerlink" title="而如果中间的code需要处理的东西多的话，fps就会下降影响程序顺滑度，而如果改成这样"></a>而如果中间的code需要处理的东西多的话，fps就会下降影响程序顺滑度，而如果改成这样</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).on(<span class="string">'touchmove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="comment">//.….code</span></span><br><span class="line">   &#125;,<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>把代码放在setTimeout中，会发现程序变快.</p>
<h2 id="关于ios系统中，webapp启动图片在不同设备上的适应性设置"><a href="#关于ios系统中，webapp启动图片在不同设备上的适应性设置" class="headerlink" title="关于ios系统中，webapp启动图片在不同设备上的适应性设置"></a>关于ios系统中，webapp启动图片在不同设备上的适应性设置</h2><p><a href="http://stackoverflow.com/questions/4687698/mulitple-apple-touch-startup-image-resolutions-for-ios-web-app-esp-for-ipad/10011893#10011893" target="_blank" rel="noopener">http://stackoverflow.com/questions/4687698/mulitple-apple-touch-startup-image-resolutions-for-ios-web-app-esp-for-ipad/10011893#10011893</a></p>
<h2 id="关于ios系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格-焦点科技葛亮"><a href="#关于ios系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格-焦点科技葛亮" class="headerlink" title="关于ios系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格(焦点科技葛亮)"></a>关于ios系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格(焦点科技葛亮)</h2><p>可以通过正则去掉</p>
<p>this.value = this.value.replace(/\u2006/g, ‘’);</p>
<h2 id="关于android-webview中，input元素输入时出现的怪异情况"><a href="#关于android-webview中，input元素输入时出现的怪异情况" class="headerlink" title="关于android webview中，input元素输入时出现的怪异情况"></a>关于android webview中，input元素输入时出现的怪异情况</h2><p>见图 <a href="https://camo.githubusercontent.com/0f3c8ca4d35a2d5ee741b58f1546129f604d805f/687474703a2f2f63646e2e6269656c6f75736f762e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031322f30382f616e64726f69642d696e7075742d6c6162656c2d746578742d69737375652e706e67" target="_blank" rel="noopener">https://camo.githubusercontent.com/0f3c8ca4d35a2d5ee741b58f1546129f604d805f/687474703a2f2f63646e2e6269656c6f75736f762e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031322f30382f616e64726f69642d696e7075742d6c6162656c2d746578742d69737375652e706e67</a><br><img src="https://cloud.githubusercontent.com/assets/14084243/22098816/57adbfa2-de63-11e6-8039-e00f34a51618.png" alt="image"></p>
<p>Android web视图,至少在HTC EVO和三星的Galaxy Nexus中，文本输入框在输入时表现的就像占位符。情况为一个类似水印的东西在用户输入区域，一旦用户开始输入便会消失(见图片)。 在android的默认样式下当输入框获得焦点后,若存在一个绝对定位或者fixed的元素，布局会被破坏,其他元素与系统输入字段会发生重叠(如搜索图标将消失为搜索字段),可以观察到布局与原始输入字段有偏差(见截图)。 这是一个相当复杂的问题，以下简单布局可以重现这个问题:</p>
<p><label for="phone">Phone: *</label></p>
<p><input type="tel" name="phone" id="phone" minlength="10" maxlength="10" inputmode="latin digits" required="required"><br>解决方法</p>
<p>-webkit-user-modify: read-write-plaintext-only<br>详细参考<a href="http://www.bielousov.com/2012/android-label-text-appears-in-input-field-as-a-placeholder/" target="_blank" rel="noopener">http://www.bielousov.com/2012/android-label-text-appears-in-input-field-as-a-placeholder/</a> 注意，该属性会导致中文不能输入词组，只能单个字。感谢鬼哥与飞（游勇飞）贡献此问题与解决方案</p>
<h2 id="JS动态生成的select下拉菜单在Android2-x版本的默认浏览器里不起作用"><a href="#JS动态生成的select下拉菜单在Android2-x版本的默认浏览器里不起作用" class="headerlink" title="JS动态生成的select下拉菜单在Android2.x版本的默认浏览器里不起作用"></a>JS动态生成的select下拉菜单在Android2.x版本的默认浏览器里不起作用</h2><p>解决方法删除了overflow-x:hidden; 然后在JS生成下来菜单之后focus聚焦，这两步操作之后解决了问题。(来自岛都-小Qi)</p>
<h2 id="ios移动端，span-p-div-标签里面遇到电话格式自动转为蓝色字体"><a href="#ios移动端，span-p-div-标签里面遇到电话格式自动转为蓝色字体" class="headerlink" title="ios移动端，span p div 标签里面遇到电话格式自动转为蓝色字体"></a>ios移动端，span p div 标签里面遇到电话格式自动转为蓝色字体</h2><h3 id="原因-这个是ios手机自动识别"><a href="#原因-这个是ios手机自动识别" class="headerlink" title="原因 这个是ios手机自动识别"></a>原因 这个是ios手机自动识别</h3><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法   "></a>解决方法   <figure class="highlight html"><figcaption><span><meta content<="" span=""></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## html5点击input没有出现光标完美解决方案</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">html5点击input没有出现光标完美解决方案</span><br><span class="line">```html</span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"输入姓名"</span> <span class="attr">class</span>=<span class="string">"inputname"</span> <span class="attr">id</span>=<span class="string">"id_name"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"输入手机"</span> <span class="attr">class</span>=<span class="string">"inputphone"</span> <span class="attr">id</span>=<span class="string">"id_phone"</span>&gt;</span></span><br></pre></td></tr></table></figure></h3><p>直接自己用jquery 写点击出现光标<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.inputname, .inputphone'</span>).on(<span class="string">'touchstart'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).focus();</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/01/19/IOS与Android平台上问题列表/" data-id="cjozunvv60004osanj95gpr27" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/遇到的问题及解决方案/">遇到的问题及解决方案</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cocos2d-js开发过程笔记" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/13/cocos2d-js开发过程笔记/" class="article-date">
  <time datetime="2016-12-13T07:47:02.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cocos2d-js/">cocos2d-js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/cocos2d-js开发过程笔记/">cocos2d-js开发过程笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resourceCallBack</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    cc.game.onStart = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        cc.view.adjustViewPort(<span class="literal">true</span>);<span class="comment">//是否自动添加viewport</span></span><br><span class="line">        <span class="keyword">if</span>(thisismobile)&#123;</span><br><span class="line">            cc.view.setDesignResolutionSize(<span class="number">640</span>, <span class="number">1136</span>, cc.ResolutionPolicy.EXACT_FIT);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cc.view.setDesignResolutionSize(<span class="number">640</span>, <span class="number">1136</span>, cc.ResolutionPolicy.SHOW_ALL);</span><br><span class="line">        &#125;</span><br><span class="line">        cc.view.enableAutoFullScreen(<span class="literal">false</span>);<span class="comment">//是否自动全屏 最好放置于下行前</span></span><br><span class="line">        cc.view.resizeWithBrowserSize(<span class="literal">false</span>);<span class="comment">//根据浏览器窗口改变</span></span><br><span class="line">        <span class="comment">//load resources</span></span><br><span class="line">        MyLoaderScene.preload(g_resources, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            cc.director.runScene(<span class="keyword">new</span> gameScene());</span><br><span class="line">        &#125;, <span class="keyword">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    cc.game.run(<span class="string">"gameCanvas"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _frames = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> frame = <span class="keyword">new</span> cc.SpriteFrame(<span class="keyword">this</span>.texture,cc.rect(<span class="number">356</span> * i, <span class="number">0</span>, <span class="number">356</span>, <span class="number">209</span>));</span><br><span class="line">    _frames.push(frame);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> _Animation = <span class="keyword">new</span> cc.Animation(_frames, <span class="number">0.01</span>);</span><br><span class="line">_Animation.setRestoreOriginalFrame(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// var _Animate = cc.Animate.create(_Animation).repeatForever();</span></span><br><span class="line"><span class="keyword">var</span> _Animate = cc.Animate.create(_Animation);</span><br><span class="line"><span class="keyword">this</span>.runAction(_Animate);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layer 此类默认设置锚点无效</span><br><span class="line">须加上 <span class="keyword">this</span>.ignoreAnchorPointForPosition(flase);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在第二种情况下，alpha不生效</span></span><br><span class="line"><span class="keyword">var</span> shareLayer = cc.LayerColor.extend(&#123;</span><br><span class="line">	name : <span class="string">"shareLayer"</span>,</span><br><span class="line">	ctor : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="comment">// 1.</span></span><br><span class="line">		<span class="keyword">this</span>._super(cc.color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">125</span>));</span><br><span class="line"></span><br><span class="line">               <span class="comment">// 2.</span></span><br><span class="line">              <span class="comment">// this.color = cc.color(0,0,0,125);</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">这里要把swallowTouches设置为<span class="literal">true</span>，这样onTouchBegan返回<span class="literal">true</span>才能够吞噬触摸，不继续往优先级更低的层传递，从而实现遮挡层。所以 onTouchDispose处理方法不能在onTouchBegan  !!! 返回<span class="literal">true</span>之前!!!执行。</span><br><span class="line">   loadListener : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> listener = cc.EventListener.create(&#123;</span><br><span class="line">            event           : cc.EventListener.TOUCH_ONE_BY_ONE,</span><br><span class="line">            target          : <span class="keyword">this</span>,</span><br><span class="line">            swallowTouches  : <span class="literal">true</span>,</span><br><span class="line">            onTouchBegan    : <span class="keyword">this</span>.onTouchBegan,</span><br><span class="line">            onTouchMoved    : <span class="keyword">this</span>.onTouchMoved,</span><br><span class="line">            onTouchEnded    : <span class="keyword">this</span>.onTouchEnded</span><br><span class="line">        &#125;);</span><br><span class="line">        cc.eventManager.addListener(listener, <span class="keyword">this</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchBegan: <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line">        <span class="keyword">var</span> locationInNode = self.convertToNodeSpace(touch.getLocation());</span><br><span class="line">        <span class="keyword">var</span> size = self.getContentSize();</span><br><span class="line">        <span class="keyword">var</span> rect = cc.rect(<span class="number">0</span>, <span class="number">0</span>, size.width, size.height);</span><br><span class="line">        <span class="keyword">if</span> (!cc.rectContainsPoint(rect, locationInNode)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchMoved : <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchEnded : <span class="function"><span class="keyword">function</span> (<span class="params">touch, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>.target;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 触摸处理</span></span><br><span class="line">        self.onTouchDispose();</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchDispose : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// TODO...</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//layer 节点 徐设置这个为ture下方可用cc.fadeOut();</span></span><br><span class="line"><span class="keyword">this</span>.setCascadeOpacityEnabled(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/13/cocos2d-js开发过程笔记/" data-id="cjozunvvv0014osanil35pxzz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nodejs笔记" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/11/nodejs笔记/" class="article-date">
  <time datetime="2016-12-11T08:14:43.000Z" itemprop="datePublished">2016-12-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nodejs/">nodejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/11/nodejs笔记/">nodejs笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>安装node.js<br>       Node –v 查版本是否成功<br>安装 express @4       npm  install –g express-generator<br>     Express –V 大写<br>进入工作目录<br>创建项目 express –e nodejs-demo<br>进入项目目录 下载依赖库 npm install<br>启动项目 npm start  或者 node ./bin/www<br>打开浏览器 localhost：3000</p>
<p>用express@4创建的项目目录结构</p>
<p>bin, 存放启动项目的脚本文件<br>node_modules, 存放所有的项目依赖库。<br>public，静态文件(css,js,img)<br>routes，路由文件(MVC中的C,controller)<br>views，页面文件(Ejs模板)<br>package.json，项目依赖配置及开发者信息<br>app.js，应用核心配置文件</p>
<p>__express不用去care，其实就是ejs模块的一个公共属性，表示要渲染的文件扩展名。</p>
<p>app.use([path], function) 使用中间件 function,可选参数path默认为”/“。使用 app.use() “定义的”中间件的顺序非常重要，它们将会顺序执行，use的先后顺序决定了中间件的优先级(经常有搞错顺序的时候);</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/11/nodejs笔记/" data-id="cjozunvws0031osanjg239a9c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-前端规范" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/11/前端规范/" class="article-date">
  <time datetime="2016-12-10T16:00:00.000Z" itemprop="datePublished">2016-12-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端规范/">前端规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/11/前端规范/">前端规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="html-规范"><a href="#html-规范" class="headerlink" title="html 规范"></a>html 规范</h2><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><h4 id="图片统一存放在图片服务器。注意修饰性图片与内容类图片的分类。"><a href="#图片统一存放在图片服务器。注意修饰性图片与内容类图片的分类。" class="headerlink" title="图片统一存放在图片服务器。注意修饰性图片与内容类图片的分类。"></a>图片统一存放在图片服务器。注意修饰性图片与内容类图片的分类。</h4><h3 id="图片格式-大小"><a href="#图片格式-大小" class="headerlink" title="图片格式/大小"></a>图片格式/大小</h3><h4 id="适当使用-css-Sprite理念合并修饰性图片，图片单张体积不能超过150Kb，JPG格式60-品质即可，部分模糊的可以保持在80-。"><a href="#适当使用-css-Sprite理念合并修饰性图片，图片单张体积不能超过150Kb，JPG格式60-品质即可，部分模糊的可以保持在80-。" class="headerlink" title="适当使用 css Sprite理念合并修饰性图片，图片单张体积不能超过150Kb，JPG格式60%品质即可，部分模糊的可以保持在80%。"></a>适当使用 css Sprite理念合并修饰性图片，图片单张体积不能超过150Kb，JPG格式60%品质即可，部分模糊的可以保持在80%。</h4><h3 id="图片引用"><a href="#图片引用" class="headerlink" title="图片引用"></a>图片引用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.图片路径需要绝对路径格式； </span><br><span class="line">2.所有img元素必须加上alt属性，修饰性图片alt属性内容为空，内容性质图片alt写上相应的内容 </span><br><span class="line">3.必须加上width和height属性，值为原来的大小，但不要用它来进行缩放</span><br></pre></td></tr></table></figure>
<h2 id="CSS规范"><a href="#CSS规范" class="headerlink" title="CSS规范"></a>CSS规范</h2><h3 id="避免使用id选择器（唯一性）"><a href="#避免使用id选择器（唯一性）" class="headerlink" title="避免使用id选择器（唯一性）"></a>避免使用id选择器（唯一性）</h3><h2 id="以字母开头"><a href="#以字母开头" class="headerlink" title="以字母开头"></a>以字母开头</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.必须以字母开头 </span><br><span class="line">2.不允许单个字母的类选择器 </span><br><span class="line">3.不允许命名带有广告等英文的单词，例如ad，adv，以防止该模块被浏览器当做垃圾广告过滤掉。任何文件命名均如此。</span><br></pre></td></tr></table></figure>
<h3 id="全小写，并使用‘-’连字符号"><a href="#全小写，并使用‘-’连字符号" class="headerlink" title="全小写，并使用‘-’连字符号"></a>全小写，并使用‘-’连字符号</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.下划线禁止出现在类的命名中，统一使用‘-’连字符 </span><br><span class="line">2.禁止驼峰式命名</span><br></pre></td></tr></table></figure>
<p>命名应简约而不是语义</p>
<p>1.避免过度简写</p>
<p>文件名例举</p>
<p>基本样式base.css框架布局 layout.css模块样式module.css等等</p>
<p>Reset参考<br>注意！使用时按需配置，去除冗余</p>
<p>精简版（适用于一般的游戏类官网、专题）<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">p</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">li</span>,<span class="selector-tag">input</span>,<span class="selector-tag">select</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">div</span>,<span class="selector-tag">table</span>,<span class="selector-tag">td</span>,<span class="selector-tag">th</span>,<span class="selector-tag">tr</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">dl</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>&#123;<span class="attribute">font-size</span>:<span class="number">100%</span>;<span class="attribute">font-weight</span>:normal;&#125;</span><br><span class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;<span class="attribute">list-style</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">strong</span>,<span class="selector-tag">b</span>&#123;<span class="attribute">font-weight</span>:normal;&#125;</span><br><span class="line"><span class="selector-tag">em</span>,<span class="selector-tag">i</span>&#123;<span class="attribute">font-style</span>:normal;&#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123;<span class="attribute">border-spacing</span>:<span class="number">0</span>;<span class="attribute">border-collapse</span>:collapse;&#125;</span><br><span class="line"><span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">vertical-align</span>:middle;&#125;</span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">select</span>&#123;<span class="attribute">vertical-align</span>:middle;<span class="attribute">font-size</span>:<span class="number">100%</span>;<span class="attribute">line-height</span>:<span class="number">150%</span>;<span class="attribute">font-family</span>:arial,<span class="string">'\5FAE\8F6F\96C5\9ED1'</span>,sans-serif;<span class="attribute">-webkit-appearance</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">a</span>&#123;<span class="attribute">text-decoration</span>:none;<span class="attribute">outline</span>:none;<span class="attribute">hide-focus</span>:<span class="built_in">expression</span>(this.hideFocus=true);<span class="attribute">background-color</span>:transparent;<span class="attribute">-webkit-tap-highlight-color</span>:transparent;&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;<span class="attribute">min-width</span>:<span class="number">1000px</span>;<span class="attribute">font</span>:<span class="number">14px</span>/<span class="number">1.5</span> arial,<span class="string">"\5FAE\8F6F\96C5\9ED1"</span>,sans-serif;<span class="attribute">-webkit-text-size-adjust</span>:none;<span class="attribute">-ms-text-size-adjust</span>:none;&#125;</span><br></pre></td></tr></table></figure></p>
<p>通用版（基本使用于所有页面）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">div</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">li</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">pre</span>,<span class="selector-tag">code</span>,<span class="selector-tag">form</span>,<span class="selector-tag">fieldset</span>,<span class="selector-tag">legend</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">p</span>,<span class="selector-tag">blockquote</span>,<span class="selector-tag">th</span>,<span class="selector-tag">td</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123;<span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">fieldset</span>,<span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">address</span>,<span class="selector-tag">caption</span>,<span class="selector-tag">cite</span>,<span class="selector-tag">code</span>,<span class="selector-tag">dfn</span>,<span class="selector-tag">em</span>,<span class="selector-tag">strong</span>,<span class="selector-tag">th</span>,<span class="selector-tag">var</span>&#123;<span class="attribute">font-style</span>:normal;<span class="attribute">font-weight</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">ol</span>,<span class="selector-tag">ul</span>&#123;<span class="attribute">list-style</span>:none&#125;</span><br><span class="line"><span class="selector-tag">caption</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">text-align</span>:left&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>&#123;<span class="attribute">font-size</span>:<span class="number">100%</span>;<span class="attribute">font-weight</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span>,<span class="selector-tag">q</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>:<span class="string">''</span>&#125;</span><br><span class="line"><span class="selector-tag">abbr</span>,<span class="selector-tag">acronym</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">font-variant</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">sup</span>&#123;<span class="attribute">vertical-align</span>:text-top&#125;</span><br><span class="line"><span class="selector-tag">sub</span>&#123;<span class="attribute">vertical-align</span>:text-bottom&#125;</span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">select</span>&#123;<span class="attribute">font-family</span>:inherit;<span class="attribute">font-size</span>:inherit;<span class="attribute">font-weight</span>:inherit&#125;</span><br><span class="line">input,textarea,select&#123;*font-size:100%&#125;</span><br></pre></td></tr></table></figure></p>
<p>通用版（支持html5）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">div</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">li</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">pre</span>,<span class="selector-tag">code</span>,<span class="selector-tag">form</span>,<span class="selector-tag">fieldset</span>,<span class="selector-tag">legend</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">p</span>,<span class="selector-tag">blockquote</span>,<span class="selector-tag">th</span>,<span class="selector-tag">td</span>,<span class="selector-tag">hr</span>,<span class="selector-tag">button</span>,<span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">details</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">header</span>,<span class="selector-tag">hgroup</span>,<span class="selector-tag">menu</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">section</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">details</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">header</span>,<span class="selector-tag">hgroup</span>,<span class="selector-tag">menu</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">section</span> &#123; <span class="attribute">display</span>:block; &#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123;<span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>&#125;</span><br><span class="line">audio,canvas,video &#123; display: inline-block;*display: inline;*zoom: 1;&#125;</span><br><span class="line"><span class="selector-tag">fieldset</span>,<span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">address</span>,<span class="selector-tag">caption</span>,<span class="selector-tag">cite</span>,<span class="selector-tag">code</span>,<span class="selector-tag">dfn</span>,<span class="selector-tag">em</span>,<span class="selector-tag">strong</span>,<span class="selector-tag">th</span>,<span class="selector-tag">var</span>&#123;<span class="attribute">font-style</span>:normal;<span class="attribute">font-weight</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">ol</span>,<span class="selector-tag">ul</span>&#123;<span class="attribute">list-style</span>:none&#125;</span><br><span class="line"><span class="selector-tag">caption</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">text-align</span>:left&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>&#123;<span class="attribute">font-size</span>:<span class="number">100%</span>;<span class="attribute">font-weight</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span>,<span class="selector-tag">q</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>:<span class="string">''</span>&#125;</span><br><span class="line"><span class="selector-tag">abbr</span>,<span class="selector-tag">acronym</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;<span class="attribute">font-variant</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">sup</span>&#123;<span class="attribute">vertical-align</span>:text-top&#125;</span><br><span class="line"><span class="selector-tag">sub</span>&#123;<span class="attribute">vertical-align</span>:text-bottom&#125;</span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">select</span>&#123;<span class="attribute">font-family</span>:inherit;<span class="attribute">font-size</span>:inherit;<span class="attribute">font-weight</span>:inherit&#125;</span><br><span class="line">input,textarea,select&#123;*font-size:100%&#125;</span><br></pre></td></tr></table></figure></p>
<p>代码风格<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.css属性值需要用到引号，统一使用单引号 </span><br><span class="line">2.为单个css选择器或新声明开启新行 </span><br><span class="line">3.布局定位属性-自身属性-文本熟悉-其他css3</span><br></pre></td></tr></table></figure></p>
<p>用css控制交互或视觉变化，js只需增减className</p>
<p>删除css属性值为0的单位</p>
<p>删除无用css样式</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/11/前端规范/" data-id="cjozunvxf004cosan9gr258gx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端规范/">前端规范</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Egret/">Egret</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-js/">cocos2d-js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos-creator/">cocos_creator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocoscreater/">cocoscreater</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/createjs/">createjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/seajs/">seajs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码片段/">代码片段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/杂谈/">杂谈</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端规范/">前端规范</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作生活/">工作生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/浏览器/">浏览器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网址收藏/">网址收藏</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/遇到的问题及解决方案/">遇到的问题及解决方案</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome浏览器/">Chrome浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Egret/">Egret</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/createjs/">createjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastClick/">fastClick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-ssh/">git/ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seajs/">seajs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码片段/">代码片段</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端规范/">前端规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作/">工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网址收藏/">网址收藏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/行业/">行业</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书笔记/">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/遇到的问题及解决方案/">遇到的问题及解决方案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/问题记录/">问题记录</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Chrome浏览器/" style="font-size: 10px;">Chrome浏览器</a> <a href="/tags/Egret/" style="font-size: 10px;">Egret</a> <a href="/tags/cocos2d-js/" style="font-size: 15px;">cocos2d-js</a> <a href="/tags/createjs/" style="font-size: 10px;">createjs</a> <a href="/tags/css3/" style="font-size: 13.33px;">css3</a> <a href="/tags/fastClick/" style="font-size: 10px;">fastClick</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/git-ssh/" style="font-size: 10px;">git/ssh</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/seajs/" style="font-size: 11.67px;">seajs</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/代码片段/" style="font-size: 20px;">代码片段</a> <a href="/tags/前端规范/" style="font-size: 10px;">前端规范</a> <a href="/tags/工作/" style="font-size: 18.33px;">工作</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/网址收藏/" style="font-size: 16.67px;">网址收藏</a> <a href="/tags/行业/" style="font-size: 10px;">行业</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/遇到的问题及解决方案/" style="font-size: 15px;">遇到的问题及解决方案</a> <a href="/tags/问题记录/" style="font-size: 10px;">问题记录</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/07/使用cocos-creator开发中碰到的问题及解决方案/">使用cocos creator开发中碰到的问题及解决方案</a>
          </li>
        
          <li>
            <a href="/2018/07/04/把前端应用部署到GitHub/">把前端应用部署到GitHub</a>
          </li>
        
          <li>
            <a href="/2018/05/17/canvas-长按保存图片/">canvas 长按保存图片</a>
          </li>
        
          <li>
            <a href="/2018/05/10/cocoscreater-微信小游戏排行榜/">cocoscreater_微信小游戏排行榜</a>
          </li>
        
          <li>
            <a href="/2018/05/10/cocoscreater-触摸事件类型和事件对象/">cocoscreater_触摸事件类型和事件对象</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>