<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="锐"><title>js工具类 | 在这里</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">js工具类</h1><a id="logo" href="/.">在这里</a><p class="description">记录发生的一切</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">js工具类</h1><div class="post-meta"><a href="/2017/12/27/js工具类/#comments" class="comment-count"></a><p><span class="date">Dec 27, 2017</span><span><a href="/categories/代码片段/" class="category">代码片段</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Tool = Tool || &#123;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 去字符串空格</span></span><br><span class="line"><span class="comment"> * @str String 所要检测的字符串</span></span><br><span class="line"><span class="comment"> * @type String 类型</span></span><br><span class="line"><span class="comment"> * @returns bolean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Tool.trim = <span class="function"><span class="keyword">function</span>(<span class="params">str, <span class="keyword">type</span></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(<span class="keyword">type</span>)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'l_trim'</span> : &#123;</span><br><span class="line">			<span class="keyword">return</span> str.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">''</span>);</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'r_trim'</span> : &#123;</span><br><span class="line">			<span class="keyword">return</span> str.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">''</span>);</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">default</span> : &#123;</span><br><span class="line">			<span class="keyword">return</span> str.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">''</span>);</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 判断开始字符是否是XX</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">App.startWith = <span class="function"><span class="keyword">function</span>(<span class="params">source, str</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^"</span> + str);</span><br><span class="line">    <span class="keyword">return</span> reg.test(source);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断结束字符是否是XX</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.endWith = <span class="function"><span class="keyword">function</span>(<span class="params">source, str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(str + <span class="string">"$"</span>);</span><br><span class="line">    <span class="keyword">return</span> reg.test(source);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将form表单元素的值序列化成对象</span></span><br><span class="line"><span class="comment"> * @example App.serializeForm($('#formId'))</span></span><br><span class="line"><span class="comment"> * @requires jQuery</span></span><br><span class="line"><span class="comment"> * @returns object</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.serializeForm = <span class="function"><span class="keyword">function</span>(<span class="params">form</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">    $.each(form.serializeArray(), <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>[<span class="string">'value'</span>] = App.trim(<span class="keyword">this</span>[<span class="string">'value'</span>]);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>[<span class="string">'value'</span>] != <span class="literal">undefined</span> &amp;&amp; <span class="keyword">this</span>[<span class="string">'value'</span>].length &gt; <span class="number">0</span>) &#123;<span class="comment">// 如果表单项的值非空，才进行序列化操作</span></span><br><span class="line">            <span class="keyword">if</span> (o[<span class="keyword">this</span>[<span class="string">'name'</span>]]) &#123;</span><br><span class="line">                o[<span class="keyword">this</span>[<span class="string">'name'</span>]] = o[<span class="keyword">this</span>[<span class="string">'name'</span>]] + <span class="string">","</span> + <span class="keyword">this</span>[<span class="string">'value'</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                o[<span class="keyword">this</span>[<span class="string">'name'</span>]] = <span class="keyword">this</span>[<span class="string">'value'</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 为json数据映射入表单，要求表单name对应json的每个name</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">App.setForm = <span class="function"><span class="keyword">function</span>(<span class="params">form, data</span>) </span>&#123;</span><br><span class="line">    $.each(form.serializeArray(), <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="keyword">this</span>[<span class="string">'name'</span>];</span><br><span class="line">        <span class="keyword">var</span> input = $(<span class="string">':input[name="'</span>+ name +<span class="string">'"]'</span>);</span><br><span class="line">        <span class="keyword">if</span>(input)</span><br><span class="line">            input.val(data[name]);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 增加formatString功能</span></span><br><span class="line"><span class="comment"> * @example App.formatString('字符串&#123;0&#125;字符串&#123;1&#125;字符串','第一个变量','第二个变量');</span></span><br><span class="line"><span class="comment"> * @returns 格式化后的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.formatString = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        str = str.replace(<span class="string">"&#123;"</span> + i + <span class="string">"&#125;"</span>, <span class="built_in">arguments</span>[i + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接收一个以逗号分割的字符串，返回List，list里每一项都是一个字符串</span></span><br><span class="line"><span class="comment"> * @returns list</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.stringToList = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="literal">undefined</span> &amp;&amp; value != <span class="string">''</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> values = [];</span><br><span class="line">        <span class="keyword">var</span> t = value.split(<span class="string">','</span>);</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; t.length; i++) &#123;</span><br><span class="line">                values.push(<span class="string">''</span> + t[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JSON对象转换成String</span></span><br><span class="line"><span class="comment"> * @param o</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.jsonToString = <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r = [];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> o == <span class="string">"string"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"\""</span> + o.replace(<span class="regexp">/([\'\"\\])/g</span>, <span class="string">"\\$1"</span>).replace(<span class="regexp">/(\n)/g</span>, <span class="string">"\\n"</span>).replace(<span class="regexp">/(\r)/g</span>, <span class="string">"\\r"</span>).replace(<span class="regexp">/(\t)/g</span>, <span class="string">"\\t"</span>) + <span class="string">"\""</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> o == <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!o.sort) &#123;</span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">var</span> i <span class="keyword">in</span> o)</span><br><span class="line">                r.push(i + <span class="string">":"</span> + App.jsonToString(o[i]));</span><br><span class="line">            <span class="keyword">if</span> (!!<span class="built_in">document</span>.all &amp;&amp; !<span class="regexp">/^\n?function\s*toString\(\)\s*\&#123;\n?\s*\[native code\]\n?\s*\&#125;\n?\s*$/</span>.test(o.toString)) &#123;</span><br><span class="line">                r.push(<span class="string">"toString:"</span> + o.toString.toString());</span><br><span class="line">            &#125;</span><br><span class="line">            r = <span class="string">"&#123;"</span> + r.join() + <span class="string">"&#125;"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; o.length; i++)</span><br><span class="line">                r.push(App.jsonToString(o[i]));</span><br><span class="line">            r = <span class="string">"["</span> + r.join() + <span class="string">"]"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o.toString();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * cookie</span></span><br><span class="line"><span class="comment"> * @param key</span></span><br><span class="line"><span class="comment"> * @param value</span></span><br><span class="line"><span class="comment"> * @param options</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.cookie = <span class="function"><span class="keyword">function</span>(<span class="params">key, value, options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &gt; <span class="number">1</span> &amp;&amp; (value === <span class="literal">null</span> || <span class="keyword">typeof</span> value !== <span class="string">"object"</span>)) &#123;</span><br><span class="line">        options = $.extend(&#123;&#125;, options);</span><br><span class="line">        <span class="keyword">if</span> (value === <span class="literal">null</span>) &#123;</span><br><span class="line">            options.expires = <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> options.expires === <span class="string">'number'</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> days = options.expires, t = options.expires = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">            t.setDate(t.getDate() + days);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">document</span>.cookie = [ <span class="built_in">encodeURIComponent</span>(key), <span class="string">'='</span>, options.raw ? <span class="built_in">String</span>(value) : <span class="built_in">encodeURIComponent</span>(<span class="built_in">String</span>(value)), options.expires ? <span class="string">'; expires='</span> + options.expires.toUTCString() : <span class="string">''</span>, options.path ? <span class="string">'; path='</span> + options.path : <span class="string">''</span>, options.domain ? <span class="string">'; domain='</span> + options.domain : <span class="string">''</span>, options.secure ? <span class="string">'; secure'</span> : <span class="string">''</span> ].join(<span class="string">''</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    options = value || &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> result, decode = options.raw ? <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125; : <span class="built_in">decodeURIComponent</span>;</span><br><span class="line">    <span class="keyword">return</span> (result = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(?:^|; )'</span> + <span class="built_in">encodeURIComponent</span>(key) + <span class="string">'=([^;]*)'</span>).exec(<span class="built_in">document</span>.cookie)) ? decode(result[<span class="number">1</span>]) : <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断IE浏览器类型，向后兼容。如果是IE9，返回9，如果是IE8，返回8；非IE，返回false</span></span><br><span class="line"><span class="comment"> * @param o</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.IE = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> v = <span class="number">3</span>, div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>), all = div.getElementsByTagName(<span class="string">'i'</span>); </span><br><span class="line">    <span class="keyword">while</span> (div.innerHTML = <span class="string">'&lt;!--[if gt IE '</span> + (++v) + <span class="string">']&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;'</span>,all[<span class="number">0</span>]); </span><br><span class="line">    <span class="keyword">return</span> v &gt; <span class="number">4</span> ? v : <span class="literal">false</span> ; </span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析URL攜帶的?之後的參數，轉換為對象，返回之</span></span><br><span class="line"><span class="comment"> * @param location</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.getURLparams = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(location.search)&#123;</span><br><span class="line">        <span class="keyword">var</span> search_params = location.search.substr(<span class="number">1</span>).split(<span class="string">'&amp;'</span>);</span><br><span class="line">        <span class="keyword">if</span>(search_params)&#123;</span><br><span class="line">            $.each(search_params, <span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">                o[<span class="keyword">this</span>.split(<span class="string">'='</span>)[<span class="number">0</span>]] = <span class="built_in">decodeURIComponent</span>(<span class="keyword">this</span>.split(<span class="string">'='</span>)[<span class="number">1</span>]);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析string 成为object</span></span><br><span class="line"><span class="comment"> * @param str, index</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.extractStringtoObject = <span class="function"><span class="keyword">function</span>(<span class="params">str, index, sym</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(index != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> i = str.indexOf(<span class="string">'='</span>, index);</span><br><span class="line">        o[str.substr(<span class="number">0</span>, i)] = str.substr(i + <span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sym == <span class="literal">null</span>)</span><br><span class="line">            sym = <span class="string">'$'</span>;</span><br><span class="line">        <span class="keyword">var</span> search_params = str.split(sym);</span><br><span class="line">        <span class="keyword">if</span>(search_params)&#123;</span><br><span class="line">            $.each(search_params, <span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">                o[<span class="keyword">this</span>.split(<span class="string">'='</span>)[<span class="number">0</span>]] = <span class="keyword">this</span>.split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取URL的contextPath</span></span><br><span class="line"><span class="comment"> * @param</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">App.contextPath = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> origin = location.origin;</span><br><span class="line">    <span class="keyword">var</span> pathname = location.pathname;</span><br><span class="line">    <span class="keyword">var</span> projectname = pathname.substr(<span class="number">0</span>, pathname.indexOf(<span class="string">'/'</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> origin + projectname;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> 生成指定位数的随机整数 </span></span><br><span class="line"><span class="comment"> **/</span>  </span><br><span class="line">App.getRandomNum = <span class="function"><span class="keyword">function</span>(<span class="params">count</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>;  </span><br><span class="line">    <span class="keyword">var</span> reNum = <span class="string">""</span>;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;  </span><br><span class="line">        arr[i] = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">10</span>);  </span><br><span class="line">        reNum += <span class="built_in">String</span>(arr[i]);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> reNum;  </span><br><span class="line">&#125;  </span><br><span class="line">App.random = <span class="function"><span class="keyword">function</span>(<span class="params">min,max</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.floor(min+<span class="built_in">Math</span>.random()*(max-min));  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 给URL追加参数 </span></span><br><span class="line"><span class="comment"> * @param &#123;&#125; url </span></span><br><span class="line"><span class="comment"> * @param &#123;&#125; parameter 参数名 </span></span><br><span class="line"><span class="comment"> * @param &#123;&#125; value  参数值 </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">App.urlAddParmert = <span class="function"><span class="keyword">function</span>(<span class="params">url,parameter,value</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> buf = <span class="keyword">new</span> StringBuffer();  </span><br><span class="line">    <span class="keyword">if</span>(!isEmpty(url))&#123;  </span><br><span class="line">        buf.append(url);  </span><br><span class="line">        <span class="keyword">if</span>(url.indexOf(<span class="string">"?"</span>) &gt; <span class="number">-1</span>)&#123;  <span class="comment">//已经有参数  </span></span><br><span class="line">            buf.append(<span class="string">"&amp;"</span>);  </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">            buf.append(<span class="string">"?"</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        buf.append(parameter);  </span><br><span class="line">        buf.append(<span class="string">"="</span>);  </span><br><span class="line">        buf.append(value);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> buf.toString();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 得到文件的扩展名 </span></span><br><span class="line"><span class="comment"> * @param &#123;&#125; filename </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">App.getFileExt = <span class="function"><span class="keyword">function</span>(<span class="params">filename</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> d=<span class="regexp">/\.[^\.]+$/</span>.exec(filename);  </span><br><span class="line">    <span class="keyword">var</span> ext = <span class="keyword">new</span> <span class="built_in">String</span>(d);  </span><br><span class="line">    <span class="keyword">var</span> s = ext.toLowerCase();  </span><br><span class="line">    <span class="keyword">return</span> s;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/代码片段/">代码片段</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/12/27/css3变形/" class="pre">css3变形</a><a href="/2017/12/27/jquery-extend/" class="next">jquery_extend</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Egret/">Egret</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-js/">cocos2d-js</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos-creator/">cocos_creator</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocoscreater/">cocoscreater</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/createjs/">createjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/seajs/">seajs</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码片段/">代码片段</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/杂谈/">杂谈</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端规范/">前端规范</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作生活/">工作生活</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/浏览器/">浏览器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网址收藏/">网址收藏</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/遇到的问题及解决方案/">遇到的问题及解决方案</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="友情链接1" target="_blank">友情链接1</a><ul></ul><a href="http://www.example2.com/" title="友情链接2" target="_blank">友情链接2</a><ul></ul><a href="http://www.example3.com/" title="友情链接3" target="_blank">友情链接3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">钟轩锐.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>